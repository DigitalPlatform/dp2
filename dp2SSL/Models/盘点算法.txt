

~~~
尝试改进 NewTagList2:

去掉 GetTagInfo 和第二阶段通知事件。让 dp2ssl 的 PageInventory 来处理 GetTagInfo。

~~~

NewTagChanged 事件得到新增的标签后，对每个标签，按照如下步骤处理：
1) 观察 ListView 中是否已经存在标签行(UID)，如果已经存在，则：
	a) 如果此行先前状态为“获得 PII 失败”，则尝试(从对照表和读卡器)重新获得 PII；
	b) 其余状态均跳过不做处理，直到结束。(正在获得册记录、获得册记录成功等状态)
2) 将 ListView 中不存在的新 UID 加入成为新的一行，然后：
	a) 查找 UID-->PII 对照表，如果找到 PII，则在行中填入 PII，状态变为“正在获得册记录 ...”(发起获得册记录的过程)；
	b) 如果没有找到 PII，则状态变为“正在获得 PII ...”，见 3)；
3) 用此 UID 请求读卡器获得标签 PII。结果可能成功，也可能失败
	a) 如果成功，在 ListView 对应行中添加 PII，状态变为“正在获得册记录 ...”(发起获得册记录的过程)；
	b) 如果失败，在 ListView 对应行显示状态“获取 PII 失败”。后面还有机会重新处理此行(见 1))
4) 获取册记录的请求可能成功，也可能失败。成功则结束处理；失败则显示出失败详情并结束处理。

~~~

两种处理方式：

1) 在 NewTagList2 的 GetTagInfo 阶段，就把新标签显示到界面；
2) 在 NewTagList2 的 GetTagInfo 阶段负责获得标签详细信息，等到触发 Notify 事件的时候
再把新标签显示到界面。

其中第一种方法显示标签的顺序是 第一个标签的 UID，第一个标签的 PII；第二个标签的 UID，第二个标签的 PII；...
第二种方法显示标签的顺序是 第一个标签的 UID，第二个标签的 UID ....；第一个标签的 PII，第二个标签的 PII ...

也就是说，大致上第一种方法能及时显示一个一个标签；第二种方法则是把本批新增标签突然一下子显示到界面，前面一段
时间则等待这些标签信息获取完成。